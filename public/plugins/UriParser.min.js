!function(){"use strict";var i,o,c,s;function a(e){var r={},n=!1,t=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(e)&&(n=e,t++);for(;t<i;t++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?r[t]=a(!0,r[t],e[t]):r[t]=e[t])}(arguments[t]);return r}Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),s=(c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,r,n=[];for(t in e)i.call(e,t)&&n.push(t);if(o)for(r=0;r<s;r++)i.call(e,c[r])&&n.push(c[r]);return n})),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n});var u,l={isString:function(e){return e&&"[object String]"===Object.prototype.toString.call(e)},isArray:function(e){return e&&"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isFunction:function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)},isDefined:function(e){return null!=e},isset:function(e){return void 0!==e},isNull:function(e){return null===e},encodeUri:function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},decodeUri:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){}},uniqueArray:function(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})},definedArray:function(e){var t=this;return e.filter(function(e){return t.isDefined(e)})},removeBrackets:function(e){try{this.isString(e)&&(e=(e=decodeURIComponent(e.replace(/\+/g," "))).replace(/\[/g,"").replace(/]/g,""))}catch(e){}return e},toObjectRecursively:function(e,t,r,n){var i,o,c=this,s={};if(n=!(!1===n),t=!0===t,this.isObject(e))for(u in e)e.hasOwnProperty(u)&&(o=e[u],delete e[u],s[u=c.removeBrackets(u)]=this.toObjectRecursively(o,t,r,n));else if(this.isArray(e)){!0===r&&(e=c.definedArray(e)),t&&(e=c.uniqueArray(e)),i=e.length;for(var a=[],u=0;u<i;++u)this.isObject(e[u])||this.isArray(e[u])?(o=e[u],delete e[u],a[u=c.removeBrackets(u)]=this.toObjectRecursively(o,t,r,n)):(!0===(o=e[u])?o=1:!1===o&&(o=0),delete e[u],a[u=c.removeBrackets(u)]=n?this.encodeUri(o):this.decodeUri(o));s=a}else!0===(o=e)?o=1:!1===o&&(o=0),s=n?this.encodeUri(o):this.decodeUri(o);return s},objSize:function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&++r;return r}},e={setIntoObject:function(e,t,r,n,i){var o;if(l.isString(t)){for(n=!0===n,i=!0===i,t=t.split(".");1<t.length;)o=t.shift(),l.isObject(e[o])||(e[o]?e[o]={0:e[o]}:e[o]={}),e=e[o];var c=t.shift(),r=l.toObjectRecursively(r,i,!0);e[c]&&!n?l.isObject(e[c])&&l.isObject(r)?e[c]=a(!0,e[c],r):l.isObject(e[c])||l.isObject(r)?e[c]=r:(e[c]=[].concat(e[c],r),i&&(e[c]=l.uniqueArray(e[c]))):e[c]=r}},getFromObject:function(e,t,r,n,i){var o,c;if(r=r||null,n=!0===n,!l.isString(t))return l.toObjectRecursively(e,!0===i,null,!n);for(t=t.split(".");1<t.length;){if(o=t.shift(),!l.isDefined(e[o]))return r;e=e[o]}return(c=e[t.shift()])?l.toObjectRecursively(c,!0===i,null,!n):r},removeFromObject:function(e,t,r,n){var i,o,c;if(l.isString(t)){for(n=!0===n,t=t.split(".");1<t.length;){if(i=t.shift(),!l.isDefined(e[i]))return;e=e[i]}if(o=t.shift(),r){if(n&&r!==e[o]||!n&&r!=e[o])if(l.isObject(e[o])){for(c in e[o])e[o].hasOwnProperty(c)&&(n&&e[o][c]===r||!n&&e[o][c]==r)&&delete e[o][c];0===l.objSize(e[o])&&delete e[o]}else if(l.isArray(e[o]))for(var s=e[o].length,a=0;a<s&&l.isDefined(e[o][a]);++a)(n&&e[o][a]===r||!n&&e[o][a]==r)&&(e[o][a].splice(a,1),--a)}else delete e[o]}},hasInObject:function(e,t,r){var n,i,o;if(!l.isString(t))return!1;for(t=t.split(".");1<t.length;){if(n=t.shift(),!l.isDefined(e[n]))return!1;e=e[n]}return o=!0,i=t.shift(),l.isDefined(e[i])||(o=!1),!0===r&&l.isNull(e[i])&&(o=!0),o}};function t(){this.regexp={removeQuestionMark:/^\?/,slashToDot:/[\[]([^\]\[]*)[\]]/g,dotToSlash:/[.]([\w]*)/g},this.obj={},this.search="?",this.numberedQuery=!1,this.changeStateFn=function(){},this.canCallChangeState=!0;function h(e,t,r){return r=!0===r,l.isNull(t)||l.isObject(t)||l.isArray(t)?r?l.encodeUri(e):l.decodeUri(e):r?l.encodeUri(e)+"="+l.encodeUri(t):l.decodeUri(e)+"="+l.decodeUri(t)}this.querySearchMaker=function(e,r,n,i){var t,o,c,s,a=this,u=[];if(n=!0===n,i=!0===i,l.isObject(e))for(t in e)e.hasOwnProperty(t)&&(o=r?r+"["+t+"]":t,c=e[t],s=h(o,c,n),u.push(l.isNull(c)||!l.isObject(c)&&!l.isArray(c)?s:a.querySearchMaker(c,o,n,i)));else l.isArray(e)?r&&e.forEach(function(e,t){s=h(o=i?r+"["+t+"]":r+"[]",c=e,n),u.push(!l.isNull(c)&&l.isObject(c)?a.querySearchMaker(c,o,n,i):s)}):r&&(s=h(o=r,c=e,n),u.push(s));return u.join("&")},this.init=function(){var e=location.search.replace(this.regexp.removeQuestionMark,"");e&&(this.parse(e),this.updateSearch())},this.init()}window.UriParser=(u=e,t.prototype=a(t.prototype,{parse:function(e,t){var r,n,i,o,c,s=this;if(!l.isString(e))return s;if(!(e=e.replace(s.regexp.removeQuestionMark,"")))return s;for(!(s.canCallChangeState=!1)===t&&s.clear(),n=(i=e.split("&")).length,r=0;r<n;++r)o=(c=i[r].split("="))[0].replace(s.regexp.slashToDot,function(e,t){return t.length?"."+t:t}),!0===(c=c[1])?c=1:!1===c&&(c=0),s.push(o,c||null);return s.changeStateFn.apply(this,[]),s.canCallChangeState=!0,s},push:function(e,t,r,n){return u.setIntoObject(this.obj,e,t,r,n),this.canCallChangeState&&this.changeStateFn.apply(this,[]),this},pushObj:function(e){var t,r=this;if(!l.isObject(e))return r;for(t in e)e.hasOwnProperty(t)&&r.push(t,e[t]);return r.canCallChangeState&&r.changeStateFn.apply(this,[]),r},pushObjOnly:function(e){var t=this;return l.isObject(e)&&(t.canCallChangeState=!1,t.obj=l.toObjectRecursively(e),t.changeStateFn.apply(this,[]),t.canCallChangeState=!0),t},clear:function(e,t,r){var n=this;return e?u.removeFromObject(n.obj,e,t,r):n.obj={},n.canCallChangeState&&n.changeStateFn.apply(this,[]),n},has:function(e,t){return!!e&&u.hasInObject(this.obj,e,t)},get:function(e,t,r,n){return n=!0===n,u.getFromObject(this.obj,e,t,!n,r)},query:function(e,t,r,n){return r=!0===r,n=!(!1===n),"?"+this.querySearchMaker(e?u.getFromObject(this.obj,e,{},!r,t):this.obj,e?e.replace(this.regexp.dotToSlash,"[$1]"):null,r,n)},onStateChange:function(e){return l.isFunction(e)&&(this.changeStateFn=e),this},pushState:function(e){var t=this;return e=e&&l.isObject(e)?e:{},t.obj=e.obj,t.updateSearch(),e.turbolinks=!0,e.url=t.search,"?"===t.search||history.pushState(e,"",t.search),t},replaceState:function(e){return e=e&&l.isObject(e)?e:{},this.obj=e.obj,this.updateSearch(),history.replaceState(e,"",this.search),this},updateSearchWithNumberedQuery:function(e){return this.numberedQuery=!0===e,this},updateSearch:function(){return this.search=this.query(null,!0,!1,this.numberedQuery),this}}),t)}();